{% extends 'accounts/base.html' %}
{% load static %}

{% block title %}Create Professional Advice - PetMedia{% endblock %}

{% block content %}
<div class="app-shell">
  {% include 'petmedia/includes/sidebar.html' %}

  <main class="app-main">
    <div class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="card">
            <div class="card-header bg-success text-white">
              <h3 class="mb-0"><i class="fas fa-user-md me-2"></i>Create Professional Advice Post</h3>
              <small>Share your veterinary expertise with the pet community</small>
            </div>
            <div class="card-body">
              <div class="alert alert-info" role="alert">
                <h6 class="alert-heading"><i class="fas fa-info-circle me-2"></i>Professional Guidelines</h6>
                <ul class="mb-0">
                  <li>Provide accurate, evidence-based information</li>
                  <li>Include appropriate medical disclaimers</li>
                  <li>Encourage pet owners to consult their veterinarian</li>
                  <li>Be professional and empathetic in your communication</li>
                </ul>
              </div>

              <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Title -->
                <div class="mb-3">
                  <label for="{{ form.title.id_for_label }}" class="form-label">
                    Professional Advice Title <span class="text-danger">*</span>
                  </label>
                  {{ form.title }}
                  {% if form.title.errors %}
                  <div class="text-danger small">
                    {{ form.title.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- Category -->
                <div class="mb-3">
                  <label for="{{ form.category.id_for_label }}" class="form-label">Category</label>
                  {{ form.category }}
                  {% if form.category.errors %}
                  <div class="text-danger small">
                    {{ form.category.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- Related Pet -->
                <div class="mb-3">
                  <label for="{{ form.related_pet.id_for_label }}" class="form-label">Related Pet</label>
                  {{ form.related_pet }}
                  <small class="form-text text-muted">Select a patient if this advice relates to a specific case</small>
                  {% if form.related_pet.errors %}
                  <div class="text-danger small">
                    {{ form.related_pet.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- Medical Information Section -->
                <div class="card mb-3">
                  <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-stethoscope me-2"></i>Medical Information</h5>
                  </div>
                  <div class="card-body">
                    <!-- Medication Name -->
                    <div class="mb-3">
                      <label for="{{ form.medication_name.id_for_label }}" class="form-label">Medication Name</label>
                      {{ form.medication_name }}
                      <small class="form-text text-muted">If discussing a specific medication</small>
                      {% if form.medication_name.errors %}
                      <div class="text-danger small">
                        {{ form.medication_name.errors.0 }}
                      </div>
                      {% endif %}
                    </div>

                    <!-- Dosage Info -->
                    <div class="mb-3">
                      <label for="{{ form.dosage_info.id_for_label }}" class="form-label">Dosage Information</label>
                      {{ form.dosage_info }}
                      <small class="form-text text-muted">General dosage guidelines (if applicable)</small>
                      {% if form.dosage_info.errors %}
                      <div class="text-danger small">
                        {{ form.dosage_info.errors.0 }}
                      </div>
                      {% endif %}
                    </div>

                    <!-- Side Effects -->
                    <div class="mb-3">
                      <label for="{{ form.side_effects.id_for_label }}" class="form-label">Side Effects</label>
                      {{ form.side_effects }}
                      <small class="form-text text-muted">Known side effects to watch for</small>
                      {% if form.side_effects.errors %}
                      <div class="text-danger small">
                        {{ form.side_effects.errors.0 }}
                      </div>
                      {% endif %}
                    </div>

                    <!-- Medical Disclaimer -->
                    <div class="mb-0">
                      <label for="{{ form.medical_disclaimer.id_for_label }}" class="form-label">Medical Disclaimer</label>
                      {{ form.medical_disclaimer }}
                      <small class="form-text text-muted">Custom disclaimer (a default will be used if left empty)</small>
                      {% if form.medical_disclaimer.errors %}
                      <div class="text-danger small">
                        {{ form.medical_disclaimer.errors.0 }}
                      </div>
                      {% endif %}
                    </div>
                  </div>
                </div>

                <!-- Excerpt -->
                <div class="mb-3">
                  <label for="{{ form.excerpt.id_for_label }}" class="form-label">Excerpt</label>
                  {{ form.excerpt }}
                  <small class="form-text text-muted">Brief summary of your professional advice</small>
                  {% if form.excerpt.errors %}
                  <div class="text-danger small">
                    {{ form.excerpt.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- Content -->
                <div class="mb-3">
                  <label for="{{ form.content.id_for_label }}" class="form-label">
                    Professional Advice Content <span class="text-danger">*</span>
                  </label>
                  {{ form.content }}
                  <small class="form-text text-muted">Share your professional knowledge and recommendations</small>
                  {% if form.content.errors %}
                  <div class="text-danger small">
                    {{ form.content.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- Featured Image -->
                <div class="mb-3">
                  <label for="{{ form.featured_image.id_for_label }}" class="form-label">Featured Image</label>
                  {{ form.featured_image }}
                  <small class="form-text text-muted">Optional: Add a relevant professional image</small>
                  {% if form.featured_image.errors %}
                  <div class="text-danger small">
                    {{ form.featured_image.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- SEO Meta Description -->
                <div class="mb-4">
                  <label for="{{ form.meta_description.id_for_label }}" class="form-label">Meta Description</label>
                  {{ form.meta_description }}
                  <small class="form-text text-muted">SEO description for search engines</small>
                  {% if form.meta_description.errors %}
                  <div class="text-danger small">
                    {{ form.meta_description.errors.0 }}
                  </div>
                  {% endif %}
                </div>

                <!-- Form Actions -->
                <div class="d-flex justify-content-between">
                  <a href="{% url 'petmedia:blog_list' %}" class="btn btn-outline-secondary">Cancel</a>
                  <div>
                    <button type="submit" class="btn btn-success">
                      <i class="fas fa-stethoscope me-1"></i> Publish Professional Advice
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>

          <!-- Professional Tips Card -->
          <div class="card mt-4">
            <div class="card-header">
              <h5 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Professional Writing Tips</h5>
            </div>
            <div class="card-body">
              <ul class="mb-0">
                <li><strong>Be Clear:</strong> Use language that pet owners can understand</li>
                <li><strong>Be Specific:</strong> Provide actionable advice when appropriate</li>
                <li><strong>Be Safe:</strong> Always recommend consulting a veterinarian for specific cases</li>
                <li><strong>Be Current:</strong> Ensure your information reflects current best practices</li>
                <li><strong>Be Respectful:</strong> Acknowledge the bond between pets and their owners</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Auto-resize textarea
  document.addEventListener('DOMContentLoaded', function() {
    const textarea = document.querySelector('#id_content');
    if (textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = textarea.scrollHeight + 'px';

      textarea.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
      });
    }
  });
</script>
{% endblock %}